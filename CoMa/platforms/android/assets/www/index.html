<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, minimum-scale=1, maximum-scale=1">
<title>Cordova and Google Maps Sample</title>

<link rel="stylesheet"
	href="http://code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.css" />
<script type="text/javascript" src="js/libs/jquery-1.7.1/jquery.min.js"></script>
<script type="text/javascript"
	src="js/libs/jquery-mobile-1.0.1/jquery.mobile-1.4.2.min.js"></script>
<script type="text/javascript" src="js/cordova.js"></script>
<script type="text/javascript" src="js/main.js"></script>

<script type="text/javascript">
	//add listener when device ready
	document.addEventListener("deviceready", onDeviceReady, false);
	var db = window.openDatabase("Congress", "1.0", "congress",0);
	//function will be called when device ready
	function onDeviceReady() {
		 //will create database Dummy_DB or open it
		db.transaction(populateDB, errorCB, successCB);
	}

	//create table and insert some record
	function populateDB(tx) {
		//tx.executeSql('DROP IF EXISTS SoccerPlayer');
		tx.executeSql('CREATE TABLE IF NOT EXISTS Congresos (Nombre VARCHAR(20) PRIMARY KEY NOT NULL, Fecha_ini DATE, Fecha_ fin DATE)');
		tx.executeSql('DELETE FROM Congresos');
		tx.executeSql('INSERT INTO Congresos VALUES ("Congreso1", "2015-08-13", "2015-08-17")');
		tx.executeSql('INSERT INTO Congresos VALUES ("Congreso2", "2015-08-13", "2015-08-17")');
		tx.executeSql('INSERT INTO Congresos VALUES ("Congreso3", "2015-08-13", "2015-08-17")');
		//tx.executeSql('INSERT INTO SoccerPlayer(Name,Club) VALUES ("Van Persie", "Arsenal")');
		//tx.executeSql('DROP TABLE IF EXIST SoccerPlayer');
		//tx.executeSql('DELETE FROM Congresos');
	}

	//function will be called when an error occurred
	function errorCB(err) {
		alert("Error processing SQL: " + err.code);
	}

	//function will be called when process succeed
	function successCB() {
		//alert("success!");
		db.transaction(queryDB, errorCB);
	}

	//select all from SoccerPlayer
	function queryDB(tx) {
		tx.executeSql('SELECT * FROM Congresos', [], querySuccess, errorCB);
	}

	function querySuccess(tx, result) {
		$('#CongressList').empty();
		$.each(result.rows, function(index) {
			var row = result.rows.item(index);
			$('#CongressList').append(
					'<li><a href="#"><h3 class="ui-li-heading">' + row['Nombre']
							+ '</h3><p class="ui-li-desc">Fecha ' + row['Fecha_ini']
							+ '</p></a></li>');
		});

		$('#CongressList').listview();
	}
</script>

</head>
<body>

	<!--HEADER!-->

	<div data-role="header" data-theme="b">
		<h1>CoMa!!</h1>
	</div>

	<!--NAVBAR!!-->
	<div data-role="tabs" id="tabs">
		<div data-role="navbar">
			<ul>
				<li><a href="#one" data-ajax="false">Info</a></li>
				<li><a href="#two" data-ajax="false">City</a></li>
				<li><a href="#three" data-ajax="false">News</a></li>
			</ul>
		</div>

		<div id="one" class="ui-body-d ui-content">
			<h1>Information about the congress</h1>
		</div>
		<div id="two">
			<h1>Information about the city</h1>
		</div>
		<div id="three">
			<h1>News about the congress on twitter</h1>
		</div>
	</div>

	<!--FOOTER-->
	<div data-role="footer" data-theme="b" data-position="fixed">

		<a href="#popupMenu" data-rel="popup"
			class="ui-btn ui-shadow ui-btn-inline ui-icon-grid 
               ui-btn-icon-left ui-btn-a"
			style="float: left">My Congress </a>
		<div data-role="popup" id="popupMenu" data-theme="b">
			<div data-role="content">
				<ul id="CongressList">
				</ul>
			</div>
		</div>


		<a href="#popupMenu1" data-rel="popup"
			class="ui-btn ui-shadow ui-btn-inline ui-icon-gear 
               ui-btn-icon-left ui-btn-a"
			style="float: right">Options</a>

		<div data-role="popup" id="popupMenu1" data-theme="b">
			<ul data-role="listview" data-inset="true">
				<li><a href="#">Languaje</a></li>
				<li><a href="#">Download</a></li>
				<li><a href="#">About</a></li>
			</ul>
		</div>
	</div>


</body>
</html>